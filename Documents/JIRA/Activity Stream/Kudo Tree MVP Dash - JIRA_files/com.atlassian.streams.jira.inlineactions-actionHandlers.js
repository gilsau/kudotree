;/* module-key = 'com.atlassian.streams.jira.inlineactions:actionHandlers', location = '/js/inline-actions/issue-vote.js' */
(function(){function b(i){var h=AJS.$(i.target),f=h.closest("div.activity-item"),g,d=i.data&&i.data.feedItem;if(d){g=d.links["http://streams.atlassian.com/syndication/issue-vote"]}else{ActivityStreams.InlineActions.statusMessage(f,"An unknown error occurred while voting.","error")}i.preventDefault();c(f);AJS.$.ajax({type:"POST",contentType:"application/json",url:ActivityStreams.InlineActions.proxy(g,d),global:false,beforeSend:function(){h.trigger("beginInlineAction")},complete:function(){h.trigger("completeInlineAction")},success:function(){ActivityStreams.InlineActions.statusMessage(f,"You have voted for this issue.","info")},error:function(e){var j;if(e.status==401||e.rc==401){j="Cannot authenticate JIRA user."}else{if(e.status==412||e.rc==412){j="You could not vote for this issue at this time."}else{if(e.status==409||e.rc==409){j="You have already voted for this issue."}else{j="An unknown error occurred while voting."}}}ActivityStreams.InlineActions.statusMessage(f,j,"error")}})}function c(d){d.find("a.activity-item-issue-vote-link").addClass("hidden");d.find("span.activity-item-issue-vote-label").removeClass("hidden")}function a(d){if(!d.links["http://streams.atlassian.com/syndication/issue-vote"]){return}var f=AJS.$('<a href="#" class="activity-item-issue-vote-link"></a>').text("Vote").bind("click",{feedItem:d},b),e=AJS.$('<span class="activity-item-issue-vote-label hidden"></span>').text("Vote");return f.add(e)}ActivityStreams.registerAction("issue file",a,9)})();;
;/* module-key = 'com.atlassian.streams.jira.inlineactions:actionHandlers', location = '/js/inline-actions/issue-watch.js' */
(function(){function b(i){var h=AJS.$(i.target),f=h.closest("div.activity-item"),g,d=i.data&&i.data.feedItem;if(d){g=d.links["http://streams.atlassian.com/syndication/watch"]}else{ActivityStreams.InlineActions.statusMessage(f,"An unknown error occurred while adding you as a watcher.","error")}i.preventDefault();c(f);AJS.$.ajax({type:"POST",contentType:"application/json",url:ActivityStreams.InlineActions.proxy(g,d),global:false,beforeSend:function(){h.trigger("beginInlineAction")},complete:function(){h.trigger("completeInlineAction")},success:function(){ActivityStreams.InlineActions.statusMessage(f,"Successfully added as a watcher.","info")},error:function(e){var j;if(e.status==401||e.rc==401){j="Cannot authenticate JIRA user."}else{if(e.status==412||e.rc==412){j="You could not be added as a watcher at this time."}else{if(e.status==409||e.rc==409){j="You are already watching this issue."}else{j="An unknown error occurred while adding you as a watcher."}}}ActivityStreams.InlineActions.statusMessage(f,j,"error")}})}function c(d){d.find("a.activity-item-issue-watch-link").addClass("hidden");d.find("span.activity-item-issue-watch-label").removeClass("hidden")}function a(d){if(!d.links["http://streams.atlassian.com/syndication/watch"]){return}var f=AJS.$('<a href="#" class="activity-item-issue-watch-link"></a>').text("Watch").bind("click",{feedItem:d},b),e=AJS.$('<span class="activity-item-issue-watch-label hidden"></span>').text("Watch");return f.add(e)}AJS.$("body").bind("issueCommented",function(i,d){if(!d.links["http://streams.atlassian.com/syndication/watch"]){return}var h=AJS.$(i.target),g=h.closest("div.activity-item");if(!g){return}var f=d.links["http://streams.atlassian.com/syndication/watch"];AJS.$.ajax({type:"GET",url:ActivityStreams.InlineActions.proxy(f,d),global:false,beforeSend:function(){h.trigger("beginInlineAction")},complete:function(){h.trigger("completeInlineAction")},success:function(e){if(e){c(g)}},error:function(e){}})});ActivityStreams.registerAction("issue comment file",a,10)})();;
